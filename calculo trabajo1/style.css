*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --cyan: #00eaff;
  --cyan-dim: rgba(0,234,255,0.1);
  --magenta: #c800ff;
  --orange: #ff7a00;
  --yellow: #ffc400;
  --green: #39ff14;
  --red: #ff2d55;
  --bg: #020814;
  --bg-panel: rgba(3,10,30,0.98);
  --bg-card: rgba(0,18,55,0.7);
  --text: #c5e0ff;
  --text-dim: #4a6a8a;
  --border: rgba(0,234,255,0.15);
  --border-bright: rgba(0,234,255,0.38);
}

body { font-family: 'Rajdhani', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

/* ── INICIO ── */
#inicio { display: flex; align-items: center; justify-content: center; height: 100vh; position: relative; overflow: hidden; }
.intro-bg {
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 25% 35%, rgba(0,234,255,0.1), transparent 55%),
    radial-gradient(ellipse at 75% 65%, rgba(57,255,20,0.07), transparent 55%),
    radial-gradient(ellipse at 50% 100%, rgba(0,50,150,0.3), transparent 60%);
  animation: bgPulse 7s ease-in-out infinite alternate;
}
#inicio::before {
  content: ''; position: absolute; inset: 0;
  background-image: linear-gradient(rgba(0,234,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,234,255,0.03) 1px, transparent 1px);
  background-size: 60px 60px;
  animation: gridMove 10s linear infinite;
}
@keyframes bgPulse { from{opacity:.6} to{opacity:1} }
@keyframes gridMove { from{background-position:0 0} to{background-position:60px 60px} }

.intro-content { position: relative; z-index: 2; text-align: center; }

.logo-ring {
  width: 110px; height: 110px; border: 2px solid var(--cyan);
  border-radius: 50%; margin: 0 auto 28px; position: relative;
  animation: spinRing 8s linear infinite;
  box-shadow: 0 0 30px var(--cyan), inset 0 0 20px rgba(0,234,255,0.06);
}
.ring-inner { position: absolute; inset: 12px; border: 1px solid rgba(0,234,255,0.3); border-radius: 50%; animation: spinRing 4s linear infinite reverse; }
.ring-icon { position: absolute; top:50%; left:50%; transform: translate(-50%,-50%); font-size:2rem; }
@keyframes spinRing { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }

.titulo-principal { font-family: 'Orbitron', monospace; font-size: clamp(2.8rem,7vw,5.5rem); font-weight: 900; color: #fff; letter-spacing: 0.06em; text-shadow: 0 0 40px var(--cyan), 0 0 80px rgba(0,234,255,0.3); }
.titulo-principal .accent { color: var(--cyan); }
.subtitulo { font-size: 0.88rem; color: var(--text-dim); letter-spacing: 0.15em; text-transform: uppercase; margin: 10px 0 20px; }

.intro-badges { display: flex; gap: 7px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
.badge { padding: 3px 11px; border: 1px solid var(--border-bright); border-radius: 20px; font-family: 'Share Tech Mono', monospace; font-size: 0.68rem; color: var(--cyan); background: var(--cyan-dim); }

.btn-start {
  position: relative; padding: 14px 44px; font-family: 'Orbitron', monospace; font-size: 0.88rem; font-weight: 700; letter-spacing: 0.15em; color: var(--bg); background: var(--cyan); border: none; border-radius: 4px; cursor: pointer; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 0 30px var(--cyan); display: inline-flex; align-items: center; gap: 10px;
}
.btn-start:hover { transform: translateY(-3px); box-shadow: 0 0 55px var(--cyan); }
.btn-arrow { font-size: 1.2rem; transition: transform 0.2s; }
.btn-start:hover .btn-arrow { transform: translateX(4px); }
.btn-glow { position: absolute; inset: 0; background: linear-gradient(90deg,transparent,rgba(255,255,255,0.25),transparent); transform: translateX(-100%); animation: shimmer 3s infinite; }
@keyframes shimmer { 0%{transform:translateX(-100%)} 60%,100%{transform:translateX(100%)} }

/* ── SIMULADOR ── */
#simulador { display: none; height: 100vh; grid-template-columns: 305px 1fr; }
#simulador.visible { display: grid; }

/* ── PANEL ── */
#panel { background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; overflow-y: auto; overflow-x: hidden; scrollbar-width: thin; scrollbar-color: var(--cyan) transparent; }
#panel::-webkit-scrollbar { width: 3px; }
#panel::-webkit-scrollbar-thumb { background: var(--cyan); border-radius: 2px; }

.panel-header { padding: 16px 18px; border-bottom: 1px solid var(--border); background: rgba(0,234,255,0.04); }
.panel-title { display: block; font-family: 'Orbitron', monospace; font-size: 1rem; font-weight: 900; color: var(--cyan); letter-spacing: 0.2em; }
.panel-sub { font-size: 0.62rem; color: var(--text-dim); letter-spacing: 0.1em; }

.section-block { padding: 12px 16px; border-bottom: 1px solid var(--border); }
.section-label { font-family: 'Orbitron', monospace; font-size: 0.58rem; letter-spacing: 0.18em; color: var(--cyan); text-transform: uppercase; margin-bottom: 8px; display: block; }
.section-desc { font-size: 0.7rem; color: var(--text-dim); margin-bottom: 10px; line-height: 1.4; }

.input-group { margin-bottom: 7px; }
.input-group label { display: block; font-size: 0.7rem; color: var(--text-dim); margin-bottom: 2px; }
.input-group input { width: 100%; padding: 6px 9px; background: rgba(0,234,255,0.04); border: 1px solid rgba(0,234,255,0.18); border-radius: 4px; color: var(--cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.88rem; outline: none; transition: border-color 0.2s; }
.input-group input:focus { border-color: var(--cyan); box-shadow: 0 0 8px rgba(0,234,255,0.15); }

.formula-preview { margin-top: 8px; padding: 6px 10px; background: rgba(255,122,0,0.07); border-left: 2px solid var(--orange); border-radius: 0 4px 4px 0; font-family: 'Share Tech Mono', monospace; font-size: 0.78rem; color: var(--orange); }

/* ── EVENTOS ── */
.evento-list { display: flex; flex-direction: column; gap: 6px; }

.evento-item { border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: rgba(0,10,30,0.5); transition: border-color 0.2s; }
.evento-item:has(input[type="checkbox"]:checked) { border-color: rgba(0,234,255,0.3); }

.evento-header { display: flex; align-items: center; gap: 8px; padding: 8px 10px; cursor: pointer; }
.evento-icon { font-size: 1rem; }
.evento-nombre { font-size: 0.72rem; font-weight: 600; color: var(--text); flex: 1; }

/* Toggle switch */
.evento-toggle { position: relative; display: inline-block; width: 32px; height: 18px; flex-shrink: 0; }
.evento-toggle input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; inset: 0; background: rgba(100,100,150,0.3); border-radius: 18px; transition: .3s; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); }
.toggle-slider::before { content: ''; position: absolute; width: 12px; height: 12px; left: 2px; bottom: 2px; background: var(--text-dim); border-radius: 50%; transition: .3s; }
.evento-toggle input:checked + .toggle-slider { background: rgba(0,234,255,0.25); border-color: var(--cyan); }
.evento-toggle input:checked + .toggle-slider::before { transform: translateX(14px); background: var(--cyan); box-shadow: 0 0 6px var(--cyan); }

.evento-body { padding: 0 10px 10px; display: none; }
.evento-item:has(input[type="checkbox"]:checked) .evento-body { display: block; }

.ev-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.ev-row span { font-size: 0.66rem; color: var(--text-dim); }
.ev-row input { width: 80px; padding: 4px 7px; background: rgba(0,234,255,0.04); border: 1px solid rgba(0,234,255,0.18); border-radius: 3px; color: var(--cyan); font-family: 'Share Tech Mono', monospace; font-size: 0.82rem; outline: none; text-align: right; }
.ev-row input:focus { border-color: var(--cyan); }

.ev-desc { font-size: 0.62rem; color: rgba(100,150,200,0.5); line-height: 1.4; margin-top: 5px; font-style: italic; }

/* Colores por evento */
#ev-bache    { --ev-color: var(--red); }
#ev-ciudad   { --ev-color: var(--yellow); }
#ev-semaforo { --ev-color: var(--green); }
#ev-curva    { --ev-color: var(--magenta); }
#ev-turbo    { --ev-color: var(--orange); }

.evento-item:has(input:checked) .evento-nombre { color: var(--ev-color, var(--cyan)); }

.radio-group { display: flex; flex-wrap: wrap; gap: 5px 10px; margin-top: 5px; }
.radio-group label { font-size: 0.7rem; color: var(--text-dim); cursor: pointer; display: flex; align-items: center; gap: 3px; }
.radio-group input[type="radio"] { accent-color: var(--cyan); width: auto; }

.controles { padding: 12px 16px; display: flex; flex-direction: column; gap: 6px; border-bottom: 1px solid var(--border); }
.btn { padding: 9px 12px; font-family: 'Orbitron', monospace; font-size: 0.63rem; font-weight: 700; letter-spacing: 0.12em; border: 1px solid; border-radius: 4px; cursor: pointer; transition: all 0.18s; }
.btn-primary { color: var(--bg); background: var(--cyan); border-color: var(--cyan); box-shadow: 0 0 12px rgba(0,234,255,0.35); }
.btn-primary:hover { box-shadow: 0 0 22px rgba(0,234,255,0.6); transform: translateY(-1px); }
.btn-secondary { color: var(--cyan); background: transparent; border-color: rgba(0,234,255,0.35); }
.btn-secondary:hover { background: rgba(0,234,255,0.07); }
.btn-danger { color: var(--magenta); background: transparent; border-color: rgba(200,0,255,0.35); }
.btn-danger:hover { background: rgba(200,0,255,0.07); }

.resultado-box { padding: 12px 16px; font-family: 'Share Tech Mono', monospace; font-size: 0.74rem; line-height: 2; background: rgba(0,234,255,0.02); flex: 1; }
.val { color: var(--cyan); }
.val-o { color: var(--orange); }
.val-y { color: var(--yellow); }

/* ── MAIN ── */
#main-area { display: grid; grid-template-rows: 33% 67%; overflow: hidden; }

.canvas-wrapper { position: relative; overflow: hidden; border-bottom: 1px solid var(--border); }
#escena { width: 100%; height: 100%; display: block; }

/* HUD */
.hud { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; background: rgba(2,8,20,0.78); border: 1px solid var(--border-bright); border-radius: 8px; padding: 5px 12px; backdrop-filter: blur(8px); }
.hud-item { display: flex; flex-direction: column; align-items: center; padding: 0 12px; }
.hud-lbl { font-family: 'Orbitron', monospace; font-size: 0.45rem; color: var(--text-dim); letter-spacing: 0.15em; }
.hud-val { font-family: 'Share Tech Mono', monospace; font-size: 0.85rem; color: var(--cyan); margin-top: 1px; }
.hud-sep { width: 1px; height: 28px; background: var(--border); }

/* Notificación de evento */
.evento-notif {
  position: absolute; bottom: 14px; left: 50%; transform: translateX(-50%);
  padding: 6px 18px; border-radius: 20px;
  font-family: 'Orbitron', monospace; font-size: 0.65rem; letter-spacing: 0.1em;
  background: rgba(2,8,20,0.85); border: 1px solid var(--border);
  color: var(--cyan); opacity: 0; transition: opacity 0.3s;
  pointer-events: none; white-space: nowrap;
}
.evento-notif.visible { opacity: 1; }

/* ── GRÁFICAS ── */
#graficas-area { display: flex; flex-direction: column; background: rgba(2,8,20,0.95); overflow: hidden; }
.tabs { display: flex; background: rgba(0,0,0,0.5); border-bottom: 1px solid var(--border); flex-shrink: 0; overflow-x: auto; }
.tabs::-webkit-scrollbar { height: 2px; }
.tab { padding: 6px 13px; font-family: 'Orbitron', monospace; font-size: 0.52rem; letter-spacing: 0.07em; color: var(--text-dim); background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; white-space: nowrap; transition: all 0.18s; }
.tab:hover { color: var(--text); }
.tab.active { color: var(--cyan); border-bottom-color: var(--cyan); }
.tab-content { display: none; flex: 1; overflow: hidden; padding: 6px; }
.tab-content.active { display: flex; }
.tab-content canvas { width: 100% !important; height: 100% !important; flex: 1; }

.split-layout { display: flex; gap: 10px; width: 100%; height: 100%; }
.split-layout canvas { flex: 1; }
.side-panel { width: 190px; flex-shrink: 0; padding: 10px 12px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; overflow-y: auto; font-size: 0.74rem; }
.info-title { font-family: 'Orbitron', monospace; font-size: 0.58rem; color: var(--cyan); letter-spacing: 0.12em; margin-bottom: 5px; }
.info-desc { color: var(--text-dim); font-size: 0.68rem; line-height: 1.5; margin-bottom: 6px; }
#integral-tabla { font-family: 'Share Tech Mono', monospace; font-size: 0.68rem; line-height: 1.9; }
.tabla-row { display: flex; justify-content: space-between; padding: 2px 5px; border-radius: 3px; margin-bottom: 2px; }
.tabla-exact { background: rgba(0,234,255,0.1); color: var(--cyan); }
.tabla-riem { background: rgba(255,122,0,0.1); color: var(--orange); }
.tabla-trap { background: rgba(180,0,255,0.1); color: var(--magenta); }
.tabla-err { background: rgba(255,196,0,0.07); color: var(--yellow); }
.legend-box { margin-top: 10px; display: flex; flex-direction: column; gap: 4px; }
.leg { display: flex; align-items: center; gap: 6px; font-size: 0.65rem; color: var(--text-dim); }
.dot { width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0; }
#gasolina-resultado { font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; line-height: 1.9; }
.gas-row { padding: 2px 5px; border-radius: 3px; margin-bottom: 2px; }


/* ── INTEGRAL TAB MEJORADO ── */
#tab-integral { padding: 0; flex-direction: column; }

.integral-wrapper { display: flex; flex-direction: column; width: 100%; height: 100%; }

.integral-toolbar {
  display: flex; align-items: center; gap: 16px;
  padding: 6px 12px; flex-shrink: 0;
  background: rgba(0,5,18,0.95);
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}

.toolbar-group { display: flex; align-items: center; gap: 7px; }
.toolbar-label {
  font-family: 'Orbitron', monospace; font-size: 0.5rem;
  letter-spacing: 0.18em; color: var(--text-dim); text-transform: uppercase;
  white-space: nowrap;
}

.graf-selector { display: flex; gap: 4px; }
.graf-btn {
  padding: 4px 10px; font-family: 'Orbitron', monospace; font-size: 0.52rem;
  letter-spacing: 0.06em; color: var(--text-dim);
  background: transparent; border: 1px solid var(--border);
  border-radius: 4px; cursor: pointer; transition: all 0.18s; white-space: nowrap;
}
.graf-btn:hover { color: var(--text); border-color: var(--border-bright); }
.graf-btn.active { color: var(--bg); background: var(--cyan); border-color: var(--cyan); }

.zoom-controls { display: flex; align-items: center; gap: 4px; }
.zoom-btn {
  width: 26px; height: 26px; display: flex; align-items: center; justify-content: center;
  font-size: 1rem; line-height: 1; font-weight: bold;
  color: var(--cyan); background: rgba(0,234,255,0.07);
  border: 1px solid rgba(0,234,255,0.25); border-radius: 4px;
  cursor: pointer; transition: all 0.15s; user-select: none;
}
.zoom-btn:hover { background: rgba(0,234,255,0.18); box-shadow: 0 0 8px rgba(0,234,255,0.3); }
.zoom-btn:active { transform: scale(0.9); }
.zoom-level {
  font-family: 'Share Tech Mono', monospace; font-size: 0.72rem;
  color: var(--cyan); min-width: 38px; text-align: center;
}

.axis-info { gap: 6px; }
.axis-badge {
  font-family: 'Share Tech Mono', monospace; font-size: 0.65rem;
  padding: 3px 8px; border-radius: 3px; white-space: nowrap;
}
.x-axis { background: rgba(255,122,0,0.12); color: var(--orange); border: 1px solid rgba(255,122,0,0.3); }
.y-axis { background: rgba(0,234,255,0.1); color: var(--cyan); border: 1px solid rgba(0,234,255,0.3); }

.integral-main { display: flex; flex: 1; gap: 8px; padding: 6px; overflow: hidden; min-height: 0; }
.integral-canvas-box { flex: 1; position: relative; overflow: hidden; }
.integral-canvas-box canvas { width: 100% !important; height: 100% !important; display: block; cursor: crosshair; }

.educativo { overflow: hidden; }
.edu-scroll { width: 100%; height: 100%; overflow-y: auto; padding: 10px; scrollbar-width: thin; scrollbar-color: var(--cyan) transparent; }
.edu-titulo { font-family: 'Orbitron', monospace; font-size: 0.78rem; color: var(--cyan); letter-spacing: 0.12em; margin-bottom: 12px; }
.edu-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 9px; }
.edu-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 11px; font-size: 0.73rem; line-height: 1.6; }
.edu-card h4 { font-family: 'Orbitron', monospace; font-size: 0.57rem; color: var(--cyan); letter-spacing: 0.1em; margin-bottom: 6px; }
.edu-card p { color: var(--text-dim); margin-bottom: 4px; }
.edu-card strong { color: var(--text); }
.formula { font-family: 'Share Tech Mono', monospace; font-size: 0.72rem; color: var(--orange); background: rgba(255,122,0,0.07); border-left: 2px solid var(--orange); padding: 3px 7px; border-radius: 0 3px 3px 0; margin: 4px 0; }
